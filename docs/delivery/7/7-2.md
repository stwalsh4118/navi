# [7-2] Implement text input component

[Back to task list](./tasks.md)

## Description

Add the `bubbles` package as a dependency and integrate the `textinput` component for session name and directory entry. Create a wrapper or helper that provides session name validation (valid tmux session name characters) and can be reused across the new session and rename dialogs.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-05 08:03:20 | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements

- Add `github.com/charmbracelet/bubbles` dependency to go.mod
- Integrate `bubbles/textinput` component into the Model
- Add text input state fields to Model for dialog inputs (name, directory)
- Implement session name validation:
  - Must not be empty
  - Must not contain `.` or `:` characters (tmux restrictions)
  - Must not conflict with existing session names
- Create helper functions for initializing and resetting text inputs
- Style text input to match the application's visual design

**External Packages**: This task requires research and a guide document for: `github.com/charmbracelet/bubbles`

## Implementation Plan

1. Research bubbles textinput API and document in guide file
2. Add dependency: `go get github.com/charmbracelet/bubbles`
3. Add text input fields to Model:
   - `nameInput textinput.Model` - for session name entry
   - `dirInput textinput.Model` - for directory entry
4. Create `initTextInputs()` function to set up inputs with:
   - Placeholder text
   - Character limit
   - Focus styling
5. Create `validateSessionName(name string) error` function:
   - Check for empty string
   - Check for invalid characters (`.`, `:`)
   - Check for name conflicts with existing sessions
6. Update `Update()` to pass key messages to focused text input when in dialog mode
7. Update dialog rendering to show text input(s)
8. Add text input styling to `styles.go` if needed

## Test Plan

**Objective**: Verify text input integration and session name validation.

**Test Scenarios**:
- Text input initializes with correct placeholder and styling
- Key presses update text input value when focused
- Empty session name returns validation error
- Session name with `.` returns validation error
- Session name with `:` returns validation error
- Valid session name passes validation
- Duplicate session name returns validation error

**Success Criteria**:
- bubbles dependency added successfully
- Text input captures keyboard input
- All validation cases return appropriate errors

## Verification

- [ ] `bubbles` dependency added to go.mod
- [ ] Text input fields added to Model
- [ ] Text input updates on key presses
- [ ] Session name validation rejects invalid names
- [ ] Session name validation rejects duplicates
- [ ] Text input styled consistently with app
- [ ] Code quality checks pass
- [ ] Tests pass

## Files Modified

