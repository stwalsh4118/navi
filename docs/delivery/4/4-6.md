# [4-6] Handle terminal resize

[Back to task list](./tasks.md)

## Description

Handle Bubble Tea's WindowSizeMsg to update the model's width and height, allowing the view to adapt to terminal size changes.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-05 00:00:00 | Created | N/A | Proposed | Task file created | AI_Agent |
| 2026-02-05 05:38:23 | Status Change | Proposed | InProgress | Started implementation | AI_Agent |
| 2026-02-05 05:39:07 | Status Change | InProgress | Review | Implementation verified with tests (WindowSizeMsg was already implemented) | AI_Agent |
| 2026-02-05 05:49:16 | Status Change | Review | Done | Task completed and verified | AI_Agent |

## Requirements

1. Handle `tea.WindowSizeMsg` in Update()
2. Store width and height in Model
3. View should use these values for layout calculations

## Implementation Plan

Update `model.go` Update() method:
```go
func (m Model) Update(msg tea.Msg) (tea.Model, tea.Cmd) {
    switch msg := msg.(type) {
    case tea.WindowSizeMsg:
        m.width = msg.Width
        m.height = msg.Height
        return m, nil

    // ... other cases
    }
    return m, nil
}
```

Update Init() to get initial window size:
```go
func (m Model) Init() tea.Cmd {
    return tea.Batch(
        tickCmd(),
    )
}
```

Note: Bubble Tea automatically sends WindowSizeMsg on startup when using tea.WithAltScreen().

## Test Plan

- **Objective**: Verify resize handling works
- **Test Scenarios**:
  1. Initial window size captured
  2. Resize updates width/height
  3. View uses updated dimensions
- **Success Criteria**: TUI adapts to terminal size

## Verification

- [ ] WindowSizeMsg handled in Update()
- [ ] width and height updated in Model
- [ ] View uses Model dimensions
- [ ] Layout adapts on resize

## Files Modified

- `model.go` - WindowSizeMsg handling was already implemented from PBI-3
- `model_test.go` - Added TestWindowSizeMsg and TestCursorClamping tests
