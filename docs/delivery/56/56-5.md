# 56-5 Mute Toggle — TUI Keybind and Visual Indicator

[Back to task list](./tasks.md)

## Description

Add an `m` keybind to the TUI that toggles the audio mute state on/off via the Notifier's `SetMuted()` method. Display a visual mute indicator in the TUI footer when muted. Mute state is session-only and resets on restart (not persisted to config).

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-19 04:44:42 | Created | N/A | Proposed | Task file created | AI_Agent |
| 2026-02-19 05:28:01 | Status Change | Proposed | InProgress | Started implementation | AI_Agent |
| 2026-02-19 05:29:53 | Status Change | InProgress | Review | Implementation complete, internal AI review passed | AI_Agent |
| 2026-02-19 06:00:26 | Status Change | Review | Done | Task completed and verified | AI_Agent |

## Requirements

1. `m` key toggles mute state via `m.audioNotifier.SetMuted(!m.audioNotifier.IsMuted())`
2. Keybind only active when not in a modal/dialog/search mode (follows existing keybind guard patterns)
3. Visual indicator in footer area when muted (e.g., "MUTED" text or mute icon)
4. Indicator hidden when unmuted (default state)
5. Footer help text includes `m` keybind (e.g., `m: mute`)
6. Session-only — mute state not persisted; starts unmuted on every launch
7. Graceful handling: if `audioNotifier` is nil, `m` key is a no-op

## Implementation Plan

1. Add `m` key case to TUI `Update()` key handler in `model.go`
2. Guard behind existing modal/dialog/search state checks
3. Call `SetMuted(!IsMuted())` on the notifier
4. Update footer rendering in `view.go` to show mute indicator
5. Add `m: mute` to footer help text
6. Test: verify keybind toggles state, visual indicator appears/disappears

## Test Plan

- **Toggle**: Pressing `m` flips mute state from false→true→false
- **Guard**: `m` key ignored when search mode is active or dialog is open
- **Nil safety**: `m` key with nil audioNotifier does not panic
- **Visual**: Footer includes "MUTED" indicator when muted, absent when unmuted
- **Footer help**: `m: mute` appears in keybind help text

## Verification

- `go build ./...` and `go vet ./...` clean
- All footer rendering tests pass with `-race`
- Keybind placed in normal session mode (guarded by dialog/search/focus checks)
- Nil-safe: audioNotifier nil check before toggling
- MUTED indicator renders in status line using existing filterActiveStyle
- `m mute` added to footer help text

## Files Modified

- `internal/tui/model.go` — added `m` keybind case to toggle mute
- `internal/tui/view.go` — added MUTED status indicator and `m mute` to footer help
