# [37-1] Per-group progress indicators

[Back to task list](./tasks.md)

## Description

Replace the simple task count `(N)` in group headers with a progress display showing `[done/total]` and a 4-character mini progress bar. Groups with 0 tasks retain the `(0)` display.

Example: `▶ 3. Enhanced Session Creation  [3/5] ██░░  todo`

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-12 07:40:26 | Created | N/A | Proposed | Task file created | AI_Agent |
| 2026-02-12 07:49:07 | Status Change | Proposed | InProgress | Started implementation | AI_Agent |
| 2026-02-12 07:50:27 | Status Change | InProgress | Review | Implementation complete, ready for review | AI_Agent |
| 2026-02-12 08:49:09 | Status Change | Review | Done | Task completed and verified | AI_Agent |

## Requirements

- Add a helper function to count completed tasks per group (tasks with status "done", "closed", or "completed")
- Update `renderTaskPanelGroupHeader()` to display `[done/total]` next to the group title
- Render a 4-character wide mini progress bar using `█` (filled) and `░` (empty), proportionally filled
- Apply dimmed styling to the progress bar
- Groups with 0 tasks continue to show `(0)` as before
- Progress calculation must use the same status normalization as the existing status badge system

## Implementation Plan

1. Add a `groupProgress(group task.TaskGroup) (done int, total int)` helper function in `taskview.go` that counts tasks with done-equivalent statuses
2. Add a `renderProgressBar(done, total int) string` helper that produces a 4-character bar using `█` and `░`
3. Modify `renderTaskPanelGroupHeader()` in `taskview.go`:
   - Replace `fmt.Sprintf("(%d)", len(group.Tasks))` with `[done/total] ██░░` when total > 0
   - Keep `(0)` for groups with no tasks
4. Add unit tests for `groupProgress` and `renderProgressBar`

## Test Plan

- **groupProgress**: Verify correct counting with mixed statuses (done, closed, completed, todo, active, etc.) and edge cases (empty group, all done, none done)
- **renderProgressBar**: Verify proportional fill at 0%, 25%, 50%, 75%, 100%, and edge cases (0/0)
- **Rendering**: Verify group header output includes progress display for groups with tasks, and `(0)` for empty groups
- All existing tests continue to pass

## Verification

- [x] `groupProgress` correctly counts done-equivalent statuses
- [x] `renderProgressBar` produces correct 4-char bar at various percentages
- [x] Group headers show `[done/total] ██░░` for groups with tasks
- [x] Groups with 0 tasks show `(0)`
- [x] Code quality checks pass
- [x] Tests pass

## Files Modified

- `internal/tui/taskview.go` — Added `groupProgress()`, `isDoneStatus()`, `renderProgressBar()` helpers; modified `renderTaskPanelGroupHeader()` to show `[done/total] ██░░` progress display
- `internal/tui/taskview_progress_test.go` — New test file with unit tests for progress functions and header rendering
