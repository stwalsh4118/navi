# [6-4] Implement binary build and install

[Back to task list](./tasks.md)

## Description

Implement the portion of install.sh that builds the Go binary and optionally installs it to ~/.local/bin/.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-05 00:00:00 | Created | N/A | Proposed | Task file created | AI_Agent |
| 2026-02-05 06:16:51 | Status Change | Proposed | InProgress | Started implementation | AI_Agent |
| 2026-02-05 06:17:26 | Status Change | InProgress | Review | Implementation complete, ready for review | AI_Agent |
| 2026-02-05 06:39:24 | Status Change | Review | Done | Task completed and verified | AI_Agent |

## Requirements

1. Build Go binary with `go build`
2. Optionally copy to `~/.local/bin/`
3. Ensure `~/.local/bin/` is in PATH (warn if not)
4. Handle build failures gracefully

## Implementation Plan

Add to `install.sh`:
```bash
# Build the binary
echo "Building claude-sessions..."
cd "$SCRIPT_DIR"

if go build -o claude-sessions .; then
    echo "✓ Built claude-sessions binary"
else
    echo "✗ Build failed"
    exit 1
fi

# Optional install to ~/.local/bin
INSTALL_DIR="$HOME/.local/bin"
read -p "Install to $INSTALL_DIR? [Y/n] " -n 1 -r
echo

if [[ $REPLY =~ ^[Yy]$ ]] || [[ -z $REPLY ]]; then
    mkdir -p "$INSTALL_DIR"
    cp claude-sessions "$INSTALL_DIR/"
    echo "✓ Installed to $INSTALL_DIR/claude-sessions"

    # Check if in PATH
    if [[ ":$PATH:" != *":$INSTALL_DIR:"* ]]; then
        echo "⚠ Note: $INSTALL_DIR is not in your PATH"
        echo "  Add this to your shell config: export PATH=\"\$HOME/.local/bin:\$PATH\""
    fi
else
    echo "Binary available at: $SCRIPT_DIR/claude-sessions"
fi
```

## Test Plan

- **Objective**: Verify build and install works
- **Test Scenarios**:
  1. Go available - builds successfully
  2. Go not available - error message
  3. User accepts install - binary copied
  4. User declines install - binary stays local
- **Success Criteria**: Binary ready to use

## Verification

- [ ] go build runs successfully
- [ ] Binary created in project directory
- [ ] Optional install to ~/.local/bin
- [ ] PATH warning if needed
- [ ] Build errors handled gracefully

## Files Modified

- `install.sh`
