# [14-5] Implement bulk tagging for selected sessions

[Back to task list](./tasks.md)

## Description

Add the ability to tag multiple selected sessions with the same tag. When sessions are selected and `t` is pressed, a tag input dialog prompts for a tag name, then applies it to all selected sessions.

Note: This task depends on PBI-8 (Session Organization with groups and tags) for the underlying tag storage mechanism. If PBI-8 is not yet implemented, this task will need to implement a basic tag storage approach or be deferred.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-05 19:04:22 | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements

- When sessions are selected and `t` is pressed, show a tag input dialog
- The dialog prompts for a tag name via text input
- On confirmation (Enter), the tag is applied to all selected sessions
- Esc cancels the dialog
- The dialog shows how many sessions will be tagged: "Tag N selected sessions"
- Tags are stored in the session status JSON file (or via PBI-8 mechanism if available)
- If no sessions are selected, tag only the current session

## Implementation Plan

1. Add `DialogBulkTag` to the `DialogMode` enum in `dialog.go`
2. Add a tag text input field to Model (reuse existing `textinput.Model` pattern)
3. Add `t` key handler in `Update`:
   - Call `getSelectedOrCurrent()` to get target sessions
   - Set `dialogMode = DialogBulkTag`
   - Initialize tag input, focus it
4. Handle dialog input:
   - `Enter`: apply tag to all target sessions, close dialog
   - `Esc`: cancel dialog
5. Implement tag storage:
   - Add `Tags []string` to `SessionInfo` if not already present
   - Write updated tags to session status file
   - Or integrate with PBI-8 tag mechanism if available
6. Render the bulk tag dialog in `renderDialog()`

**External Packages**: None required. Uses existing text input pattern.

**Dependency Note**: If PBI-8 is not implemented, a minimal tag storage approach will be needed (adding `Tags` field to status JSON).

## Test Plan

- Verify `t` with selections shows tag input dialog
- Verify dialog shows count of sessions to be tagged
- Verify Enter applies tag to all selected sessions
- Verify Esc cancels without tagging
- Verify tag is persisted in session data
- Verify single-session tagging works when nothing is selected

## Verification

- [ ] Tag dialog renders with correct session count
- [ ] Tag applied to all selected sessions on confirm
- [ ] Tag persisted in session data
- [ ] Single-session tagging unaffected
- [ ] Code quality checks pass
- [ ] Tests pass

## Files Modified

