# [19-3] Extend SessionInfo and Model for remote sessions

[Back to task list](./tasks.md)

## Description

Extend the existing `SessionInfo` struct to include remote machine identification and update the `Model` struct to include remote configuration and SSH pool. This integrates the remote session infrastructure with the existing application model.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-05 13:58:48 | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements

- Add `Remote` field to `SessionInfo` struct (empty string for local sessions)
- Add `remotes []RemoteConfig` field to `Model` struct
- Add `sshPool *SSHPool` field to `Model` struct
- Update `initialModel()` to load remote configuration
- Update `initialModel()` to initialize SSH pool
- Ensure backward compatibility (local sessions continue to work)

## Implementation Plan

1. Update `model.go`:
   - Add `Remote string` field to `SessionInfo` struct with JSON tag
   - Add `remotes []RemoteConfig` to `Model` struct
   - Add `sshPool *SSHPool` to `Model` struct
2. Update `main.go`:
   - Call `loadRemotesConfig()` in `initialModel()`
   - Initialize `SSHPool` with loaded remotes
   - Pass remotes and pool to Model
3. Update `Init()` method if needed for startup initialization
4. Ensure existing tests still pass

## Test Plan

**Objective**: Verify model changes compile and maintain backward compatibility.

**Test Scenarios**:
- Local sessions work unchanged (Remote field empty)
- Model initializes with empty remotes config
- Model initializes with valid remotes config
- SessionInfo JSON serialization includes Remote field

**Success Criteria**:
- Existing tests pass unchanged
- Model compiles with new fields
- Local session functionality unaffected

## Verification

- [ ] `SessionInfo.Remote` field added
- [ ] `Model.remotes` field added
- [ ] `Model.sshPool` field added
- [ ] `initialModel()` loads remote configuration
- [ ] Backward compatibility maintained
- [ ] Code quality checks pass
- [ ] Tests pass

## Files Modified

