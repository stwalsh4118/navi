# [19-7] Add remote filter capability

[Back to task list](./tasks.md)

## Description

Add the ability to filter the session list by local/remote sessions. This allows users to focus on sessions from a specific source when managing many sessions across multiple machines.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-05 13:58:48 | Created | N/A | Proposed | Task file created | AI_Agent |
| 2026-02-05 14:30:00 | Status Change | Proposed | InProgress | Started implementation | AI_Agent |
| 2026-02-05 14:35:00 | Status Change | InProgress | Review | Implementation complete, ready for review | AI_Agent |
| 2026-02-05 15:00:13 | Status Change | Review | Done | Task completed and verified | AI_Agent |

## Requirements

- Add filter state to Model (all/local/remote/specific-remote)
- Add keybinding to cycle through filter options (e.g., `f` key)
- Display current filter state in header or footer
- Filter affects session list display but not underlying data
- Maintain cursor position when filter changes (or reset to 0)
- Filter persists until explicitly changed

## Implementation Plan

1. Add filter types and state to `model.go`:
   - `FilterMode` enum: All, Local, Remote, ByRemoteName
   - `filterMode FilterMode` field in Model
   - `filterRemote string` for specific remote filtering
2. Update `renderSessionList()` in `view.go`:
   - Filter sessions based on current filter mode
   - Apply filter before iterating
3. Add keybinding for filter toggle:
   - `f` to cycle: All -> Local -> Remote -> All
   - Or open a filter selection dialog
4. Update footer to show current filter state
5. Adjust cursor bounds after filter changes

## Test Plan

**Objective**: Verify filtering works correctly for all modes.

**Test Scenarios**:
- Default filter shows all sessions
- Local filter shows only sessions with empty Remote
- Remote filter shows only sessions with non-empty Remote
- Filter change updates display immediately
- Cursor adjusts when filter reduces list size

**Success Criteria**:
- All filter modes work correctly
- UI indicates current filter
- No crashes on empty filtered results

## Verification

- [x] Filter state added to Model
- [x] Filter keybinding implemented
- [x] Session list respects filter
- [x] Current filter displayed in UI
- [x] Cursor handling on filter change
- [x] Code quality checks pass
- [x] Tests pass

## Files Modified

- `model.go` - Added FilterMode type and filterMode field, added getFilteredSessions() and filterModeString() methods, added 'f' key handler, updated all session access to use filtered list
- `view.go` - Updated renderSessionList() to use filtered sessions, updated renderFooter() to show current filter state, updated renderPreview() to use filtered sessions

