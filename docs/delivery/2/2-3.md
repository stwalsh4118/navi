# [2-3] Test hook script manually

[Back to task list](./tasks.md)

## Description

Manually verify the hook script works correctly in a tmux environment before integration.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-05 00:00:00 | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements

1. Test script in a tmux session
2. Verify all status values work
3. Verify JSON output is valid
4. Verify CLAUDE_NOTIFICATION env var is captured
5. Test fallback behavior outside tmux

## Implementation Plan

1. Start a tmux session: `tmux new-session -s test`
2. Run script with each status: `./hooks/notify.sh working`
3. Check output: `cat ~/.claude-sessions/test.json`
4. Test with notification: `CLAUDE_NOTIFICATION="Test message" ./hooks/notify.sh waiting`
5. Exit tmux and test fallback behavior
6. Verify JSON with `jq` or similar

## Test Plan

- **Objective**: Verify script works in real tmux environment
- **Test Scenarios**:
  1. `./hooks/notify.sh working` - verify status is "working"
  2. `./hooks/notify.sh waiting` - verify status is "waiting"
  3. `./hooks/notify.sh done` - verify status is "done"
  4. `./hooks/notify.sh permission` - verify status is "permission"
  5. `CLAUDE_NOTIFICATION="Test" ./hooks/notify.sh waiting` - verify message captured
  6. Outside tmux - verify session is "unknown"
- **Success Criteria**: All scenarios produce correct JSON

## Verification

- [ ] Script runs without errors in tmux
- [ ] All status values produce correct JSON
- [ ] CLAUDE_NOTIFICATION is captured in message field
- [ ] Session name matches tmux session
- [ ] CWD matches current pane path
- [ ] Timestamp is current Unix time
- [ ] Fallback to "unknown" works outside tmux

## Files Modified

None (testing only)
