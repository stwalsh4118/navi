# [3-4] Implement session sorting

[Back to task list](./tasks.md)

## Description

Implement sorting logic that prioritizes sessions needing attention (`waiting`, `permission`) and then sorts by timestamp.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-05 00:00:00 | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements

1. Sessions with `waiting` or `permission` status come first
2. Within priority groups, sort by timestamp descending (most recent first)
3. Handle equal timestamps correctly

## Implementation Plan

Implement in `sessions.go`:
```go
func sortSessions(sessions []SessionInfo) {
    sort.Slice(sessions, func(i, j int) bool {
        // Priority statuses come first
        iPriority := sessions[i].Status == "waiting" || sessions[i].Status == "permission"
        jPriority := sessions[j].Status == "waiting" || sessions[j].Status == "permission"

        if iPriority != jPriority {
            return iPriority // priority sessions first
        }

        // Within same priority, sort by timestamp descending
        return sessions[i].Timestamp > sessions[j].Timestamp
    })
}
```

## Test Plan

- **Objective**: Verify sessions are sorted correctly
- **Test Scenarios**:
  1. Mixed statuses - waiting/permission first
  2. Same status, different timestamps - most recent first
  3. Empty slice - no crash
  4. Single session - no crash
- **Success Criteria**: Sort order matches PRD specification

## Verification

- [ ] `waiting` and `permission` statuses sorted first
- [ ] Timestamp descending within groups
- [ ] Handles empty input
- [ ] Handles single item

## Files Modified

- `sessions.go`
