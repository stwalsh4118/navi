# [57-4] RAM Badge Rendering in Sidebar

[Back to task list](./tasks.md)

## Description

Extend `renderMetricsBadges()` in `internal/tui/view.go` to display a RAM usage badge alongside the existing time, tools, and tokens badges. The badge uses the `FormatBytes()` helper from task 57-1 and only renders for local sessions (where `Metrics.Resource` is non-nil and non-zero).

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-19 08:35:20 | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements

1. Add a RAM badge to `renderMetricsBadges()` using the format `"ðŸ§  256M"` (brain emoji + formatted bytes)
2. Only render when `m.Resource != nil && m.Resource.RSSBytes > 0`
3. Position the RAM badge after the token badge (last in the badge line)
4. Use `metrics.FormatBytes(m.Resource.RSSBytes)` for the value
5. Follow existing dimmed style â€” no new styles needed
6. Remote sessions naturally skip RAM badge since their `Resource` field will be nil (not polled)

## Implementation Plan

**File**: `internal/tui/view.go`

1. In `renderMetricsBadges()`, add after the token count badge block:
   ```go
   // RAM badge
   if m.Resource != nil && m.Resource.RSSBytes > 0 {
       parts = append(parts, fmt.Sprintf("ðŸ§  %s", metrics.FormatBytes(m.Resource.RSSBytes)))
   }
   ```

That's the entire change â€” one conditional block, following the exact same pattern as the three existing badges.

## Test Plan

- **Visual verification**: Run the TUI and confirm RAM badges appear for local sessions
- **Format verification**: Confirm badge shows human-readable values (e.g., "256M", "1.2G")
- **Remote sessions**: Confirm remote sessions do not display RAM badge
- **Compilation**: `go build ./...` passes

## Verification

- [ ] RAM badge renders with format `"ðŸ§  <value>"` on the metrics line
- [ ] Badge only appears when Resource data is available and non-zero
- [ ] Badge uses same dimmed style as existing badges
- [ ] Remote sessions show no RAM badge
- [ ] `go build ./...` and `go vet ./...` clean

## Files Modified

- `internal/tui/view.go` â€” extend `renderMetricsBadges()` with RAM badge
