# [12-2] Extend SessionInfo with Metrics field

[Back to task list](./tasks.md)

## Description

Add the Metrics field to the existing SessionInfo struct and ensure JSON parsing correctly handles the extended session data format. This enables the TUI to read and display metrics from session status files.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-05 16:25:14 | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements

- Add `Metrics *Metrics` field to SessionInfo struct in model.go
- Add appropriate JSON tag with omitempty for backward compatibility
- Ensure existing session files without metrics still parse correctly
- Existing tests must continue to pass

## Implementation Plan

1. Open model.go and locate SessionInfo struct
2. Add Metrics field after existing fields:
   ```go
   Metrics *Metrics `json:"metrics,omitempty"`
   ```
3. Update any test fixtures that use SessionInfo if needed
4. Verify backward compatibility by testing with old session JSON files

## Test Plan

**Simple task - focus on backward compatibility:**

- Verify SessionInfo compiles with new field
- Test parsing session JSON without metrics field (backward compatibility)
- Test parsing session JSON with full metrics data
- Ensure existing unit tests pass

## Verification

- [ ] SessionInfo struct includes Metrics field
- [ ] JSON tag has omitempty for backward compatibility
- [ ] Existing session files parse correctly
- [ ] New session files with metrics parse correctly
- [ ] All existing tests pass
- [ ] Code quality checks pass

## Files Modified

