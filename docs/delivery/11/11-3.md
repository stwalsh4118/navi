# [11-3] Add preview state to Model

[Back to task list](./tasks.md)

## Description

Extend the Model struct to include all state needed for the preview pane feature, including visibility toggle, cached content, selected layout, and resize state.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-05 09:48:56 | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements

- Add preview-related fields to Model struct in model.go
- Include visibility toggle (`previewVisible bool`)
- Include cached preview content (`previewContent string`)
- Include preview layout mode (`previewLayout PreviewLayout`)
- Include preview width for resizing (`previewWidth int`)
- Include timestamp of last capture for debouncing
- Initialize default values appropriately

## Implementation Plan

1. Add fields to Model struct in model.go:
   ```go
   // Preview pane state
   previewVisible   bool           // Whether preview pane is shown
   previewContent   string         // Cached captured output
   previewLayout    PreviewLayout  // Current layout mode
   previewWidth     int            // Width of preview pane (for side layout)
   previewLastCapture time.Time    // Last capture timestamp for debouncing
   ```
2. Set default values:
   - `previewVisible` defaults to `false`
   - `previewLayout` defaults to `PreviewLayoutSide`
   - `previewWidth` defaults to `previewDefaultWidth`
3. Ensure new fields don't affect existing functionality

## Test Plan

**Simple task - focus on compilation and basic integration:**

- Code compiles without errors
- Existing tests continue to pass
- Model can be instantiated with new fields

## Verification

- [ ] Model struct extended with preview fields
- [ ] Default values are appropriate
- [ ] Existing model_test.go tests still pass
- [ ] Code quality checks pass

## Files Modified

