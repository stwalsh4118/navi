# [11-5] Create preview pane renderer

[Back to task list](./tasks.md)

## Description

Implement the visual rendering of the preview pane component, including the box styling, session name header, and content display. Support the side panel layout as the default view.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-05 09:48:56 | Created | N/A | Proposed | Task file created | AI_Agent |
| 2026-02-05 09:57:05 | Status Change | Proposed | InProgress | Started implementation | AI_Agent |
| 2026-02-05 09:58:33 | Status Change | InProgress | Review | Implementation complete | AI_Agent |
| 2026-02-05 11:02:56 | Status Change | Review | Done | Task completed and verified | AI_Agent |

## Requirements

- Create `renderPreview()` method on Model
- Render preview with bordered box matching PRD design
- Show session name in box header
- Display captured content inside the box
- Support the side panel layout (sessions list left, preview right)
- Handle empty content state gracefully
- Style preview box with lipgloss

## Implementation Plan

1. Add preview box style to styles.go:
   ```go
   previewBoxStyle = lipgloss.NewStyle().
       Border(lipgloss.RoundedBorder()).
       BorderForeground(lipgloss.Color("99")).
       Padding(0, 1)
   ```
2. Create `renderPreview()` method in view.go:
   - Build header line with session name
   - Render content lines
   - Apply box style with dynamic width
3. Modify `View()` method to use side-by-side layout:
   - Use `lipgloss.JoinHorizontal` to place sessions list and preview side by side
   - Calculate widths based on terminal size and `previewWidth`
4. Handle edge cases:
   - No session selected
   - Empty preview content
   - Preview content longer than available height

## Test Plan

**Medium task - verify rendering output:**

- Preview renders with correct box styling
- Session name appears in header
- Content displays correctly
- Side-by-side layout works
- Empty states handled gracefully
- Existing view tests pass

## Verification

- [ ] `renderPreview()` method implemented
- [ ] Preview styled per PRD mockup
- [ ] Side panel layout works correctly
- [ ] Empty states display appropriately
- [ ] Code quality checks pass
- [ ] view_test.go tests pass

## Files Modified

- `styles.go` - Added previewBoxStyle, previewHeaderStyle, previewEmptyStyle
- `view.go` - Added renderPreview() and renderSessionList() methods
- `model.go` - Modified View() for side-by-side layout, added getPreviewWidth()
- `view_test.go` - Added TestRenderPreview and TestViewWithPreview tests
