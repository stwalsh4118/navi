# [16-5] Display git info in session rows

[Back to task list](./tasks.md)

## Description

Update the session row rendering to display git information below the working directory line. Show branch name, dirty indicator, and ahead/behind counts in a compact format. Style appropriately to be informative but not overwhelming.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-05 11:30:11 | Created | N/A | Proposed | Task file created | AI_Agent |
| 2026-02-05 11:40:12 | Status Change | Proposed | InProgress | Started implementation | AI_Agent |
| 2026-02-05 11:41:13 | Status Change | InProgress | Review | Implementation complete, ready for review | AI_Agent |
| 2026-02-05 12:45:00 | Status Change | Review | Done | Task completed and verified | AI_Agent |

## Requirements

- Add git info line to session rendering (after CWD, before message)
- Format: `branch-name ● +3 -1` where:
  - Branch name shown in cyan
  - `●` shown in yellow when dirty (omit when clean)
  - `+N` shown in green when ahead (omit when 0)
  - `-N` shown in red when behind (omit when 0)
- Only show git line if session has git info
- Maintain consistent indentation with other session lines
- Handle long branch names gracefully (truncate if needed)

## Implementation Plan

1. Create `renderGitInfo(git *GitInfo, width int) string` function in view.go
2. Apply appropriate styling to each component
3. Update `renderSession` to include git info line when GitInfo is present
4. Add branch name truncation for very long names
5. Test with various git states

## Test Plan

- Session without git info renders without git line
- Session with clean repo shows just branch name
- Dirty indicator appears when uncommitted changes exist
- Ahead count appears in green when > 0
- Behind count appears in red when > 0
- Long branch names are truncated appropriately
- Git line aligns with other session content

## Verification

- [ ] renderGitInfo function implemented
- [ ] Proper styling for branch, dirty, ahead, behind
- [ ] Git line integrated into renderSession
- [ ] Long branch names handled
- [ ] Visual alignment correct
- [ ] Code quality checks pass
- [ ] Tests pass

## Files Modified

- `view.go` - Added renderGitInfo function and updated renderSession to include git info line
- `view_test.go` - Added tests for renderGitInfo and git info display in session rows
