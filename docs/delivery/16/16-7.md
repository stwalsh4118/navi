# [16-7] Implement PR detection from branch names

[Back to task list](./tasks.md)

## Description

Extract issue or PR numbers from common branch naming conventions. Support patterns like `feature/123-description`, `fix/issue-456`, `bugfix/GH-789`, etc. Use detected numbers to construct potential PR/issue URLs.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-05 11:30:11 | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements

- Detect issue/PR numbers from branch name patterns:
  - `feature/123-description` → Issue #123
  - `fix/issue-456` → Issue #456
  - `bugfix/GH-789` → Issue #789
  - `hotfix/789` → Issue #789
  - `123-some-feature` → Issue #123
- Add detected number to GitInfo or create PRInfo struct
- Support optional `gh pr view` integration if `gh` CLI is available
- Cache PR info to avoid repeated API calls

## Implementation Plan

1. Define common branch patterns as regex
2. Implement `extractIssueNumber(branch string) (int, bool)` function
3. Create `PRInfo` struct with Number and URL fields
4. Optionally check `gh pr view --json number,url` for actual PR data
5. Add PR info to GitInfo struct
6. Cache PR lookups to avoid repeated gh calls

## Test Plan

- Various branch patterns extract numbers correctly
- No number extracted from branches without patterns
- gh CLI integration works when available
- Missing gh CLI handled gracefully
- PR info cached appropriately

## Verification

- [ ] Branch pattern parsing implemented
- [ ] Issue numbers extracted correctly
- [ ] PRInfo struct defined
- [ ] Optional gh CLI integration works
- [ ] Cache implemented for PR lookups
- [ ] Code quality checks pass
- [ ] Tests pass

## Files Modified

