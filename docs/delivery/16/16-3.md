# [16-3] Extend SessionInfo with GitInfo

[Back to task list](./tasks.md)

## Description

Add a GitInfo field to the SessionInfo struct so that git information is associated with each session. Update JSON marshaling/unmarshaling to include the git field. Ensure backward compatibility with existing session files that don't have git info.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-05 11:30:11 | Created | N/A | Proposed | Task file created | AI_Agent |
| 2026-02-05 11:37:19 | Status Change | Proposed | InProgress | Started implementation | AI_Agent |
| 2026-02-05 11:38:13 | Status Change | InProgress | Review | Implementation complete, ready for review | AI_Agent |
| 2026-02-05 12:45:00 | Status Change | Review | Done | Task completed and verified | AI_Agent |

## Requirements

- Add `Git *GitInfo` field to SessionInfo struct
- Use pointer so nil represents "no git info" (non-git directory)
- Add `json:"git,omitempty"` tag for clean serialization
- Ensure existing session files without git field parse correctly
- Update any code that creates SessionInfo to optionally include GitInfo

## Implementation Plan

1. Add `Git *GitInfo` field to SessionInfo in model.go
2. Add appropriate JSON tag with omitempty
3. Verify existing JSON parsing still works (backward compatible)
4. Update session creation code if needed

## Test Plan

- Existing session JSON files parse correctly (no git field)
- New session JSON with git field parses correctly
- SessionInfo with nil Git serializes without git field
- SessionInfo with GitInfo serializes git field correctly

## Verification

- [ ] Git field added to SessionInfo
- [ ] JSON tag includes omitempty
- [ ] Backward compatibility verified
- [ ] Code compiles without errors
- [ ] Tests pass

## Files Modified

- `model.go` - Added Git field to SessionInfo struct
- `sessions_test.go` - Added JSON backward compatibility tests
