# [5-2] Implement tmux attach command

[Back to task list](./tasks.md)

## Description

Implement the command to attach to the selected tmux session using Bubble Tea's ExecProcess.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-05 00:00:00 | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements

1. On Enter, attach to selected session
2. Use `tea.ExecProcess` to hand off terminal to tmux
3. Run `tmux attach-session -t <session_name>`
4. Return `attachDoneMsg` when tmux exits

## Implementation Plan

Implement attach command in `model.go`:
```go
func attachSession(name string) tea.Cmd {
    c := exec.Command("tmux", "attach-session", "-t", name)
    return tea.ExecProcess(c, func(err error) tea.Msg {
        return attachDoneMsg{}
    })
}
```

Handle Enter key in Update():
```go
case "enter":
    if len(m.sessions) > 0 && m.cursor < len(m.sessions) {
        session := m.sessions[m.cursor]
        return m, attachSession(session.TmuxSession)
    }
    return m, nil
```

## Test Plan

- **Objective**: Verify attach/detach flow works
- **Test Scenarios**:
  1. Enter attaches to selected session
  2. Terminal switches to tmux
  3. After detach, TUI reappears
  4. Enter on empty list does nothing
- **Success Criteria**: Seamless attach/detach loop

## Verification

- [ ] Enter triggers attach command
- [ ] tmux takes over terminal
- [ ] attachDoneMsg received on detach
- [ ] Empty list handled gracefully

## Files Modified

- `model.go`
